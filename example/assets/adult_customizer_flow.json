{
    "id": "adult_customizer_flow",
    "type": "navigable",
    "initialValues": {
        "user_input_target_audience_is_child": false,
        "user_input_genre": "",
        "user_input_explicit": false,
        "user_input_story_place": "",
        "user_input_story_time": "",
        "user_input_story_idea": "",
        "user_input_target_duration": 90,
        "user_input_language_complexity": 4,
        "user_input_narrator_voice": "",
        "user_input_audiobook_language_code": "en",
        "user_input_character_ids": "",
        "user_input_main_character_id": "",
        "user_input_target_listener_age": ""
    },
    "rules": [
        {
            "type": "conditional",
            "triggerStepIdentifier": {
                "id": "q2"
            },
            "values": {
                "romance": "a1"
            }
        },
        {
            "type": "direct",
            "triggerStepIdentifier": {
                "id": "q3"
            },
            "destinationStepIdentifier": {
                "id": "q5"
            }
        },
        {
            "type": "conditional",
            "triggerStepIdentifier": {
                "id": "a1"
            },
            "values": {
                "true": "q3",
                "false": "q5"
            }
        },
        {
            "type": "conditional",
            "triggerStepIdentifier": {
                "id": "q5"
            },
            "values": {
                "POSITIVE": "a2",
                "NEGATIVE": "q8"
            }
        },
        {
            "type": "direct",
            "triggerStepIdentifier": {
                "id": "a2"
            },
            "destinationStepIdentifier": {
                "id": "q6"
            }
        },
        {
            "type": "direct",
            "triggerStepIdentifier": {
                "id": "q6"
            },
            "destinationStepIdentifier": {
                "id": "q7"
            }
        },
        {
            "type": "direct",
            "triggerStepIdentifier": {
                "id": "q7"
            },
            "destinationStepIdentifier": {
                "id": "q8"
            }
        },
        {
            "type": "direct",
            "triggerStepIdentifier": {
                "id": "c9"
            },
            "destinationStepIdentifier": {
                "id": "q6"
            }
        },
        {
            "type": "conditional",
            "triggerStepIdentifier": {
                "id": "c3"
            },
            "values": {
                "POSITIVE": "c5",
                "NEGATIVE": "c4"
            }
        },
        {
            "type": "direct",
            "triggerStepIdentifier": {
                "id": "c4"
            },
            "destinationStepIdentifier": {
                "id": "c6"
            }
        },
        {
            "type": "direct",
            "triggerStepIdentifier": {
                "id": "q11"
            },
            "destinationStepIdentifier": {
                "id": "q15"
            }
        },
        {
            "type": "direct",
            "triggerStepIdentifier": {
                "id": "q16"
            },
            "destinationStepIdentifier": {
                "id": "q18"
            }
        },
        {
            "type": "conditional",
            "triggerStepIdentifier": {
                "id": "q8"
            },
            "values": {
                "POSITIVE": "q9",
                "NEGATIVE": "a4"
            }
        },
        {
            "type": "direct",
            "triggerStepIdentifier": {
                "id": "q61"
            },
            "destinationStepIdentifier": {
                "id": "q6"
            }
        }
    ],
    "steps": [
        {
            "stepIdentifier": {
                "id": "q2"
            },
            "type": "question",
            "relatedParameter": "user_input_genre",
            "title": "What genre should your story be?",
            "answerFormat": {
                "type": "single",
                "textChoices": [
                    {
                        "text": "Adventure",
                        "value": "adventure"
                    },
                    {
                        "text": "Fantasy",
                        "value": "fantasy"
                    },
                    {
                        "text": "Sci-fi",
                        "value": "sci-fi"
                    },
                    {
                        "text": "Romance",
                        "value": "romance"
                    },
                    {
                        "text": "Mystery",
                        "value": "mystery"
                    },
                    {
                        "text": "Horror",
                        "value": "horror"
                    },
                    {
                        "text": "Historical Fiction",
                        "value": "historical fiction"
                    },
                    {
                        "text": "Realism",
                        "value": "realism"
                    },
                    {
                        "text": "Thriller",
                        "value": "thriller"
                    }
                ],
                "buttonChoices": []
            }
        },
        {
            "stepIdentifier": {
                "id": "q5"
            },
            "type": "question",
            "title": "Do you want to pick the characters for the story yourself?",
            "infoText": "You can either choose characters from your own collection or you can let us handle the characters.",
            "infoTitle": "Character Selection",
            "answerFormat": {
                "type": "bool",
                "positiveAnswer": "Yes",
                "negativeAnswer": "No, choose for me!",
                "result": "POSITIVE"
            }
        },
        {
            "stepIdentifier": {
                "id": "a1"
            },
            "type": "question",
            "relatedParameter": "is_adult",
            "title": "Checking User Age",
            "canGoBack": false,
            "answerFormat": {
                "type": "api_call",
                "endpointUrl": "https://check-if-user-is-adult-cf-6n5kxdz4pa-lz.a.run.app",
                "parameters": {
                    "creator_user_id": "$user_id"
                },
                "requestType": "POST"
            }
        },
        {
            "stepIdentifier": {
                "id": "q3"
            },
            "type": "question",
            "title": "Should your story be explicit?",
            "relatedParameter": "user_input_explicit",
            "answerFormat": {
                "type": "bool",
                "positiveAnswer": "Yes please ;)",
                "negativeAnswer": "No waay!",
                "result": "POSITIVE"
            }
        },
        {
            "stepIdentifier": {
                "id": "q6"
            },
            "type": "question",
            "title": "Choose the characters to include in your story:",
            "relatedParameter": "user_input_character_ids",
            "relatedTextChoiceParameter": "selected_characters",
            "answerFormat": {
                "type": "multiple",
                "textChoices": [],
                "dynamicTextChoices": "$existing_characters",
                "buttonChoices": [],
                "dynamicImageChoices": "$existing_characters_image_urls",
                "dynamicCharacterNames": "$existing_characters.character_name"
            }
        },
        {
            "stepIdentifier": {
                "id": "q7"
            },
            "type": "question",
            "title": "Choose your main character:",
            "relatedParameter": "user_input_main_character_id",
            "answerFormat": {
                "type": "single",
                "textChoices": [],
                "dynamicTextChoices": "$selected_characters",
                "buttonChoices": [],
                "dynamicImageChoices": "$existing_characters_image_urls",
                "dynamicCharacterNames": "$existing_characters.character_name"
            }
        },
        {
            "stepIdentifier": {
                "id": "a2"
            },
            "type": "question",
            "title": "Getting existing characters",
            "answerFormat": {
                "type": "api_call",
                "endpointUrl": "https://get-existing-characters-cf-6n5kxdz4pa-lz.a.run.app",
                "parameters": {
                    "creator_user_id": "$user_id"
                },
                "requestType": "POST"
            }
        },
        {
            "stepIdentifier": {
                "id": "q8"
            },
            "type": "question",
            "title": "Do you already have an idea for the story?",
            "infoText": "You can either create your own story idea or we can give you some options.",
            "infoTitle": "Story Idea",
            "answerFormat": {
                "type": "bool",
                "positiveAnswer": "Yes, I have something in mind!",
                "negativeAnswer": "No, I need inspiration!",
                "result": "POSITIVE"
            }
        },
        {
            "stepIdentifier": {
                "id": "q9"
            },
            "type": "question",
            "relatedParameter": "user_input_story_place",
            "title": "Where should the story take place?",
            "hint": "E.g. a quiet city, a forest, a spaceship, etc.",
            "answerFormat": {
                "type": "text",
                "maxLines": 5
            }
        },
        {
            "stepIdentifier": {
                "id": "q10"
            },
            "type": "question",
            "relatedParameter": "user_input_story_time",
            "title": "When does your story happen?",
            "hint": "E.g. 2020, 19th century, future, etc.",
            "answerFormat": {
                "type": "text",
                "maxLines": 5
            }
        },
        {
            "stepIdentifier": {
                "id": "q11"
            },
            "type": "question",
            "relatedParameter": "user_input_story_idea",
            "title": "Whats your idea for the story?",
            "infoText": "This is the main idea of your story. This is going to impact the story the most.",
            "infoTitle": "Story Idea",
            "answerFormat": {
                "type": "text",
                "maxLines": 5,
                "placeholder": "A story about "
            }
        },
        {
            "stepIdentifier": {
                "id": "a4"
            },
            "type": "question",
            "title": "Generating Ideas",
            "answerFormat": {
                "type": "api_call",
                "endpointUrl": "https://generate-ideas-adult-cf-6n5kxdz4pa-lz.a.run.app",
                "parameters": {
                    "creator_user_id": "$user_id",
                    "user_input_genre": "$user_input_genre",
                    "user_input_explicit": "$user_input_explicit",
                    "user_input_character_ids": "$user_input_character_ids",
                    "user_input_main_character_id": "$user_input_main_character_id",
                    "wanted_number_of_ideas": 3
                },
                "requestType": "POST"
            }
        },
        {
            "stepIdentifier": {
                "id": "q12"
            },
            "type": "question",
            "relatedParameter": "user_input_story_idea",
            "title": "Choose an idea for your story:",
            "infoText": "This is the main idea of your story. This is going to impact the story the most. You can edit this in the next step.",
            "infoTitle": "Story Idea",
            "answerFormat": {
                "type": "single",
                "textChoices": [],
                "dynamicTextChoices": "$generated_ideas",
                "buttonChoices": []
            }
        },
        {
            "stepIdentifier": {
                "id": "q13"
            },
            "type": "question",
            "relatedParameter": "user_input_story_idea",
            "title": "If you want you can edit the story here:",
            "answerFormat": {
                "type": "text",
                "maxLines": 5,
                "placeholder": "$user_input_story_idea"
            }
        },
        {
            "stepIdentifier": {
                "id": "q15"
            },
            "type": "question",
            "relatedParameter": "user_input_language_complexity",
            "title": "How complex should the language be?",
            "answerFormat": {
                "type": "scale",
                "step": 1,
                "minimumValue": 1,
                "maximumValue": 10,
                "defaultValue": 4,
                "minimumValueDescription": "simple",
                "maximumValueDescription": "fancy and complex"
            }
        },
        {
            "stepIdentifier": {
                "id": "q16"
            },
            "type": "question",
            "relatedParameter": "user_input_narrator_voice",
            "title": "Who do you want to narrate your audiobook?",
            "text": "",
            "answerFormat": {
                "type": "single_audio",
                "textChoices": [
                    {
                        "text": "Lucas",
                        "value": "lucas"
                    },
                    {
                        "text": "Nova",
                        "value": "nova"
                    },
                    {
                        "text": "Theo",
                        "value": "theo"
                    },
                    {
                        "text": "Eva",
                        "value": "eva"
                    },
                    {
                        "text": "Richard",
                        "value": "richard"
                    }
                ],
                "buttonChoices": [],
                "imageChoices": [
                    "https://firebasestorage.googleapis.com/v0/b/audiobookgen.appspot.com/o/narrator_images%2F36guy.png?alt=media&token=a77511ea-61a1-480c-a806-9d1057e2244e",
                    "https://firebasestorage.googleapis.com/v0/b/audiobookgen.appspot.com/o/narrator_images%2FJari_A_32-year-old_strict-looking_woman_recording_a_podcast_vie_e10097ee-289e-4638-a538-2021b5fd0714.png?alt=media&token=595b6713-9e3f-4afd-8f83-5564d705d4fb",
                    "https://firebasestorage.googleapis.com/v0/b/audiobookgen.appspot.com/o/narrator_images%2FJ2ari_A_28-year-old_friendly_man_recording_a_podcast_into_a_micr_30293fa2-156a-4a78-96d2-fa817a5c9094.png?alt=media&token=26445323-bd58-4881-a08d-2f9d4da8c3b9",
                    "https://firebasestorage.googleapis.com/v0/b/audiobookgen.appspot.com/o/narrator_images%2FJari_A_28-year-old_strict_black_woman_recording_a_podcast_into__ea96538b-1cea-4a6f-bba8-c489889e7758.png?alt=media&token=365947c1-2d45-4b96-a69a-a88021717b48",
                    "https://firebasestorage.googleapis.com/v0/b/audiobookgen.appspot.com/o/narrator_images%2Fjari1710_a_friendly_old_man_in_her_60s_recording_a_podcast_into_3d192fe0-920d-471b-a0dc-f37b6540b1b7.png?alt=media&token=bf1920f6-9293-4b2b-bac4-54d090033ac9"
                ],
                "audioChoices": [
                    "https://firebasestorage.googleapis.com/v0/b/audiobookgen.appspot.com/o/voice_samples%2Flucas_sample.mp3?alt=media&token=c7746f73-93b9-4c1e-8684-7a513126630d",
                    "https://firebasestorage.googleapis.com/v0/b/audiobookgen.appspot.com/o/voice_samples%2Fnova_sample.mp3?alt=media&token=aed7dc10-7eed-4a9e-a80c-b3d57bfa927c",
                    "https://firebasestorage.googleapis.com/v0/b/audiobookgen.appspot.com/o/voice_samples%2Ftheo_sample.mp3?alt=media&token=82609dae-40b6-4848-ba37-d7e022f03162",
                    "https://firebasestorage.googleapis.com/v0/b/audiobookgen.appspot.com/o/voice_samples%2Feva.wav?alt=media&token=a960c6a6-4be7-42d2-a0ef-a27c8d273d1d",
                    "https://firebasestorage.googleapis.com/v0/b/audiobookgen.appspot.com/o/voice_samples%2Frichard.wav?alt=media&token=bd3b06e6-0f94-4182-a532-e81a1ad0bf85"
                ]
            }
        },
        {
            "stepIdentifier": {
                "id": "q17"
            },
            "type": "question",
            "relatedParameter": "user_input_audiobook_language_code",
            "title": "What language should the audiobook be in?",
            "text": "",
            "answerFormat": {
                "type": "single",
                "textChoices": [
                    {
                        "text": "English",
                        "value": "en"
                    },
                    {
                        "text": "German",
                        "value": "de"
                    }
                ],
                "buttonChoices": []
            }
        },
        {
            "stepIdentifier": {
                "id": "a7"
            },
            "type": "question",
            "relatedParameter": "existing_characters",
            "title": "Getting existing characters",
            "answerFormat": {
                "type": "api_call",
                "endpointUrl": "https://kuluko.com/api/get_existing_characters",
                "parameters": {
                    "creator_user_id": "$user_id"
                },
                "requestType": "POST"
            }
        },
        {
            "stepIdentifier": {
                "id": "a8"
            },
            "type": "question",
            "title": "Generating settings",
            "answerFormat": {
                "type": "api_call",
                "endpointUrl": "https://kuluko.com/api/suggest_story_place_children",
                "parameters": {
                    "creator_user_id": "$user_id",
                    "user_input_genre": "$user_input_genre",
                    "user_input_target_listener_age": "$user_input_target_listener_age",
                    "wanted_number_of_settings": 3,
                    "user_input_lesson": "$user_input_lesson"
                },
                "requestType": "POST"
            }
        },
        {
            "stepIdentifier": {
                "id": "a9"
            },
            "type": "question",
            "title": "Generating Ideas",
            "relatedParameter": "generated_ideas",
            "answerFormat": {
                "type": "api_call",
                "endpointUrl": "https://kuluko.com/api/generate_ideas_children",
                "parameters": {
                    "creator_user_id": "$user_id",
                    "user_input_genre": "$user_input_genre",
                    "user_input_target_listener_age": "$user_input_target_listener_age",
                    "user_input_lesson": "$user_input_lesson",
                    "user_input_story_place": "$user_input_story_place",
                    "user_input_main_character_id": "$user_input_main_character_id",
                    "wanted_number_of_ideas": 4
                },
                "requestType": "POST"
            }
        },
        {
            "stepIdentifier": {
                "id": "q18"
            },
            "type": "completion",
            "text": "Finish to generate your audiobook!",
            "title": "All done!",
            "buttonText": "Generate Audiobook!",
            "parameters": {
                "creator_user_id": "$user_id",
                "user_input_genre": "$user_input_genre",
                "user_input_explicit": "$user_input_explicit",
                "user_input_story_place": "$user_input_story_place",
                "user_input_story_time": "$user_input_story_time",
                "user_input_story_idea": "$user_input_story_idea",
                "user_input_language_complexity": "$user_input_language_complexity",
                "user_input_narrator_voice": "$user_input_narrator_voice",
                "user_input_audiobook_language_code": "$user_input_audiobook_language_code",
                "user_input_character_ids": "$user_input_character_ids",
                "user_input_main_character_id": "$user_input_main_character_id",
                "user_input_target_listener_age": "$user_input_target_listener_age"
            },
            "requestType": "POST",
            "endpointUrl": "https://initiate-audiobook-cf-6n5kxdz4pa-lz.a.run.app"
        }
    ]
}